@use '@styles/variables' as var;

$themes: (
  light: (
    bg: var.$bg--light,
    bg-button: var.$bg-button--light,
    bg-button-hover: var.$bg-button-hover--light,
    bg-card: var.$bg-card--light,
    bg-card-hover: var.$bg-card-hover--light,
    bg-nav: var.$bg-nav--light,
    bg-nav-gradient-primary: var.$bg-nav-gradient-primary--light,
    bg-nav-gradient-secondary: var.$bg-nav-gradient-secondary--light,
    bg-nav-hover: var.$bg-nav-hover--light,
    bg-nav-mobile: var.$bg-nav-mobile--light,
    bg-secondary: var.$bg-secondary--light,
    border-button: var.$border-button--light,
    border-button-hover: var.$border-button-hover--light,
    border-input: var.$border-input--light,
    shadow-button: var.$shadow-button--light,
    shadow-card: var.$shadow-card--light,
    shadow-input: var.$shadow-input--light,
    shadow-nav: var.$shadow-nav--light,
    text: var.$text--light,
  ),
  dark: (
    bg: var.$bg--dark,
    bg-button: var.$bg-button--dark,
    bg-button-hover: var.$bg-button-hover--dark,
    bg-card: var.$bg-card--dark,
    bg-card-hover: var.$bg-card-hover--dark,
    bg-nav: var.$bg-nav--dark,
    bg-nav-gradient-primary: var.$bg-nav-gradient-primary--dark,
    bg-nav-gradient-secondary: var.$bg-nav-gradient-secondary--dark,
    bg-nav-hover: var.$bg-nav-hover--dark,
    bg-nav-mobile: var.$bg-nav-mobile--dark,
    bg-secondary: var.$bg-secondary--dark,
    border-button: var.$border-button--dark,
    border-input: var.$border-input--dark,
    shadow-button: var.$shadow-button--dark,
    border-button-hover: var.$border-button-hover--dark,
    shadow-card: var.$shadow-card--dark,
    shadow-input: var.$shadow-input--dark,
    shadow-nav: var.$shadow-nav--dark,
    text: var.$text--dark,
  ),
);

/**
 * Mixin to that will generate CSS blocks for each theme.
*/
@mixin themed() {
  // For each theme defined in the $themes variable
  @each $theme, $map in $themes {
    :global(.theme--#{$theme}) & {
      // Create a global map ($theme-map) that contains values for each key in the theme.
      $theme-map: () !global;
      @each $key, $submap in $map {
        $value: map-get(map-get($themes, $theme), '#{$key}');
        // Merge each key-value pair into the theme-specific map.
        $theme-map: map-merge(
          $theme-map,
          (
            $key: $value,
          )
        ) !global;
      }
      // Execute the contents of the mixin.
      @content;
      // Unset the theme map to ensure that the $theme-map does not affect other themes.
      $theme-map: null !global;
    }
  }
}

@mixin gthemed() {
  // For each theme defined in the $themes variable
  @each $theme, $map in $themes {
    .theme--#{$theme} & {
      // Create a global map ($theme-map) that contains values for each key in the theme.
      $theme-map: () !global;
      @each $key, $submap in $map {
        $value: map-get(map-get($themes, $theme), '#{$key}');
        // Merge each key-value pair into the theme-specific map.
        $theme-map: map-merge(
          $theme-map,
          (
            $key: $value,
          )
        ) !global;
      }
      // Execute the contents of the mixin.
      @content;
      // Unset the theme map to ensure that the $theme-map does not affect other themes.
      $theme-map: null !global;
    }
  }
}

/**
 * Retrieves values from the theme-specific map.
*/
@function t($key) {
  @return map-get($theme-map, $key);
}
